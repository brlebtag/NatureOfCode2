
<html>
    <head>
        <title>Challenge #159 - Simple Pendulum Simulation</title>
        <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.min.js"></script>
        <script>
            let angle;
            let bob; 
            let len;
            let origin;
            let angleVelocity = 0;
            let angleAcceleration = 0;
            const Gravity = 1;

        function setup() {
            createCanvas(800, 600);
            origin = createVector(300, 0);
            angle = PI / 4;
            bob = createVector();
            len = 200;
        }

        function draw() {
            background(0);

            let force = -Gravity * sin(angle) / len;
            angleAcceleration = force;
            angleVelocity += angleAcceleration;
            angle += angleVelocity;

            // angleVelocity *= 0.99;

            bob.x = len * sin(angle) + origin.x;
            bob.y = len * cos(angle) + origin.y;

            stroke(255);
            strokeWeight(8);
            fill(127);
            line(origin.x, origin.y, bob.x, bob.y);
            circle(bob.x, bob.y, 64);
        }
        </script>
    </head>
</html> 