<html>
    <head>
        <title>Angles and Rotation 2.1 - Grab and Release</title>
        <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.min.js"></script>
        <script>

            let angle = 0;
            let angleVelocity = 0;
            let angleAcceleration = 0.001;
            let pAngle = 0;

            function setup() {
                createCanvas(windowWidth, windowHeight);
                angleMode(RADIANS);
            }

            function mouseDragged() {
                let v = createVector(pmouseX - width / 2, pmouseY - height / 2);
                pAngle = v.heading();
            }

            function mouseReleased() {
                let v2 = createVector(mouseX - width / 2, mouseY - height / 2);
                angleVelocity = v2.heading() - pAngle;
                console.log(angleVelocity);
            }

            function draw() {

                if (mouseIsPressed) {
                    let v = createVector(mouseX - width / 2, mouseY - height / 2);
                    angle = v.heading();
                }

                background(146, 83, 161);
                noStroke();
                fill(240, 99, 164);
                rectMode(CENTER);
                translate(width / 2, height / 2);
                rotate(angle);
                rect(0, 0, 256, 32);

                angle += angleVelocity;
                angleVelocity += angleAcceleration;
            }
        </script>
    </head>
</html> 